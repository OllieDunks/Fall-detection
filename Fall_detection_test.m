close all;
%%
%Test 
%%
%Fall detection function

%%
filename1 = fullfile('C:\Users\enqui\OneDrive\Documents\MATLAB\3rd year\Project\Test_Fall');
imds = imageDatastore('Test_Fall', 'LabelSource', 'foldernames', 'IncludeSubfolders',true);

%%
%Determining the point of the images and setting the size to 500 points per
%image so it isn't time consuming.
bag = bagOfFeatures(imds,'VocabularySize',1000,'PointSelection','Detector');
imagefeatures = encode(bag,imds);

%%
%Putting the data points into a table and adding a column in the table with
%the names of each whether the image is a fall or not.
Falldata_Test = array2table(imagefeatures);
%Falldata_Test.Labels = imds.Labels;   

%%
% imagepred = predict(trainedClassifier,imagefeatures);
%[imagepred, probabilities] = predict(trainClassifier,validationAccuracy,Falldata);
% [imagepred2, probabilities2] = predict(trainedModel5.ClassificationSVM,imagefeatures);
%  [imagepred3, probabilities3] = predict(trainedModel2.ClassificationNeuralNetwork,imagefeatures);
% [imagepred4, probabilities4] = predict(trainedModel3.ClassificationSVM,imagefeatures);
%figure
%cm = confusionchart(imds.Labels,imagepred)
% figure
% cm2 = confusionchart(imds.Labels,imagepred2)
%  figure
%  cm3 = confusionchart(imds.Labels,imagepred3)

[trainedClassifier, validationAccuracy] = trainClassifier(Falldata);
 yfit = trainedClassifier.predictFcn(Falldata_Test);

 cm = confusionchart(imds.Labels,yfit)

 

 
function [trainedClassifier, validationAccuracy] = trainClassifier(trainingData)
% [trainedClassifier, validationAccuracy] = trainClassifier(trainingData)
% Returns a trained classifier and its accuracy. This code recreates the
% classification model trained in Classification Learner app. Use the
% generated code to automate training the same model with new data, or to
% learn how to programmatically train models.
%
%  Input:
%      trainingData: A table containing the same predictor and response
%       columns as those imported into the app.
%
%  Output:
%      trainedClassifier: A struct containing the trained classifier. The
%       struct contains various fields with information about the trained
%       classifier.
%
%      trainedClassifier.predictFcn: A function to make predictions on new
%       data.
%
%      validationAccuracy: A double containing the accuracy as a
%       percentage. In the app, the Models pane displays this overall
%       accuracy score for each model.
%
% Use the code to train the model with new data. To retrain your
% classifier, call the function from the command line with your original
% data or new data as the input argument trainingData.
%
% For example, to retrain a classifier trained with the original data set
% T, enter:
%   [trainedClassifier, validationAccuracy] = trainClassifier(T)
%
% To make predictions with the returned 'trainedClassifier' on new data T2,
% use
%   yfit = trainedClassifier.predictFcn(T2)
%
% T2 must be a table containing at least the same predictor columns as used
% during training. For details, enter:
%   trainedClassifier.HowToPredict

% Auto-generated by MATLAB on 17-Mar-2022 11:39:55


% Extract predictors and response
% This code processes the data into the right shape for training the
% model.
inputTable = trainingData;
predictorNames = {'imagefeatures1', 'imagefeatures2', 'imagefeatures3', 'imagefeatures4', 'imagefeatures5', 'imagefeatures6', 'imagefeatures7', 'imagefeatures8', 'imagefeatures9', 'imagefeatures10', 'imagefeatures11', 'imagefeatures12', 'imagefeatures13', 'imagefeatures14', 'imagefeatures15', 'imagefeatures16', 'imagefeatures17', 'imagefeatures18', 'imagefeatures19', 'imagefeatures20', 'imagefeatures21', 'imagefeatures22', 'imagefeatures23', 'imagefeatures24', 'imagefeatures25', 'imagefeatures26', 'imagefeatures27', 'imagefeatures28', 'imagefeatures29', 'imagefeatures30', 'imagefeatures31', 'imagefeatures32', 'imagefeatures33', 'imagefeatures34', 'imagefeatures35', 'imagefeatures36', 'imagefeatures37', 'imagefeatures38', 'imagefeatures39', 'imagefeatures40', 'imagefeatures41', 'imagefeatures42', 'imagefeatures43', 'imagefeatures44', 'imagefeatures45', 'imagefeatures46', 'imagefeatures47', 'imagefeatures48', 'imagefeatures49', 'imagefeatures50', 'imagefeatures51', 'imagefeatures52', 'imagefeatures53', 'imagefeatures54', 'imagefeatures55', 'imagefeatures56', 'imagefeatures57', 'imagefeatures58', 'imagefeatures59', 'imagefeatures60', 'imagefeatures61', 'imagefeatures62', 'imagefeatures63', 'imagefeatures64', 'imagefeatures65', 'imagefeatures66', 'imagefeatures67', 'imagefeatures68', 'imagefeatures69', 'imagefeatures70', 'imagefeatures71', 'imagefeatures72', 'imagefeatures73', 'imagefeatures74', 'imagefeatures75', 'imagefeatures76', 'imagefeatures77', 'imagefeatures78', 'imagefeatures79', 'imagefeatures80', 'imagefeatures81', 'imagefeatures82', 'imagefeatures83', 'imagefeatures84', 'imagefeatures85', 'imagefeatures86', 'imagefeatures87', 'imagefeatures88', 'imagefeatures89', 'imagefeatures90', 'imagefeatures91', 'imagefeatures92', 'imagefeatures93', 'imagefeatures94', 'imagefeatures95', 'imagefeatures96', 'imagefeatures97', 'imagefeatures98', 'imagefeatures99', 'imagefeatures100', 'imagefeatures101', 'imagefeatures102', 'imagefeatures103', 'imagefeatures104', 'imagefeatures105', 'imagefeatures106', 'imagefeatures107', 'imagefeatures108', 'imagefeatures109', 'imagefeatures110', 'imagefeatures111', 'imagefeatures112', 'imagefeatures113', 'imagefeatures114', 'imagefeatures115', 'imagefeatures116', 'imagefeatures117', 'imagefeatures118', 'imagefeatures119', 'imagefeatures120', 'imagefeatures121', 'imagefeatures122', 'imagefeatures123', 'imagefeatures124', 'imagefeatures125', 'imagefeatures126', 'imagefeatures127', 'imagefeatures128', 'imagefeatures129', 'imagefeatures130', 'imagefeatures131', 'imagefeatures132', 'imagefeatures133', 'imagefeatures134', 'imagefeatures135', 'imagefeatures136', 'imagefeatures137', 'imagefeatures138', 'imagefeatures139', 'imagefeatures140', 'imagefeatures141', 'imagefeatures142', 'imagefeatures143', 'imagefeatures144', 'imagefeatures145', 'imagefeatures146', 'imagefeatures147', 'imagefeatures148', 'imagefeatures149', 'imagefeatures150', 'imagefeatures151', 'imagefeatures152', 'imagefeatures153', 'imagefeatures154', 'imagefeatures155', 'imagefeatures156', 'imagefeatures157', 'imagefeatures158', 'imagefeatures159', 'imagefeatures160', 'imagefeatures161', 'imagefeatures162', 'imagefeatures163', 'imagefeatures164', 'imagefeatures165', 'imagefeatures166', 'imagefeatures167', 'imagefeatures168', 'imagefeatures169', 'imagefeatures170', 'imagefeatures171', 'imagefeatures172', 'imagefeatures173', 'imagefeatures174', 'imagefeatures175', 'imagefeatures176', 'imagefeatures177', 'imagefeatures178', 'imagefeatures179', 'imagefeatures180', 'imagefeatures181', 'imagefeatures182', 'imagefeatures183', 'imagefeatures184', 'imagefeatures185', 'imagefeatures186', 'imagefeatures187', 'imagefeatures188', 'imagefeatures189', 'imagefeatures190', 'imagefeatures191', 'imagefeatures192', 'imagefeatures193', 'imagefeatures194', 'imagefeatures195', 'imagefeatures196', 'imagefeatures197', 'imagefeatures198', 'imagefeatures199', 'imagefeatures200', 'imagefeatures201', 'imagefeatures202', 'imagefeatures203', 'imagefeatures204', 'imagefeatures205', 'imagefeatures206', 'imagefeatures207', 'imagefeatures208', 'imagefeatures209', 'imagefeatures210', 'imagefeatures211', 'imagefeatures212', 'imagefeatures213', 'imagefeatures214', 'imagefeatures215', 'imagefeatures216', 'imagefeatures217', 'imagefeatures218', 'imagefeatures219', 'imagefeatures220', 'imagefeatures221', 'imagefeatures222', 'imagefeatures223', 'imagefeatures224', 'imagefeatures225', 'imagefeatures226', 'imagefeatures227', 'imagefeatures228', 'imagefeatures229', 'imagefeatures230', 'imagefeatures231', 'imagefeatures232', 'imagefeatures233', 'imagefeatures234', 'imagefeatures235', 'imagefeatures236', 'imagefeatures237', 'imagefeatures238', 'imagefeatures239', 'imagefeatures240', 'imagefeatures241', 'imagefeatures242', 'imagefeatures243', 'imagefeatures244', 'imagefeatures245', 'imagefeatures246', 'imagefeatures247', 'imagefeatures248', 'imagefeatures249', 'imagefeatures250', 'imagefeatures251', 'imagefeatures252', 'imagefeatures253', 'imagefeatures254', 'imagefeatures255', 'imagefeatures256', 'imagefeatures257', 'imagefeatures258', 'imagefeatures259', 'imagefeatures260', 'imagefeatures261', 'imagefeatures262', 'imagefeatures263', 'imagefeatures264', 'imagefeatures265', 'imagefeatures266', 'imagefeatures267', 'imagefeatures268', 'imagefeatures269', 'imagefeatures270', 'imagefeatures271', 'imagefeatures272', 'imagefeatures273', 'imagefeatures274', 'imagefeatures275', 'imagefeatures276', 'imagefeatures277', 'imagefeatures278', 'imagefeatures279', 'imagefeatures280', 'imagefeatures281', 'imagefeatures282', 'imagefeatures283', 'imagefeatures284', 'imagefeatures285', 'imagefeatures286', 'imagefeatures287', 'imagefeatures288', 'imagefeatures289', 'imagefeatures290', 'imagefeatures291', 'imagefeatures292', 'imagefeatures293', 'imagefeatures294', 'imagefeatures295', 'imagefeatures296', 'imagefeatures297', 'imagefeatures298', 'imagefeatures299', 'imagefeatures300', 'imagefeatures301', 'imagefeatures302', 'imagefeatures303', 'imagefeatures304', 'imagefeatures305', 'imagefeatures306', 'imagefeatures307', 'imagefeatures308', 'imagefeatures309', 'imagefeatures310', 'imagefeatures311', 'imagefeatures312', 'imagefeatures313', 'imagefeatures314', 'imagefeatures315', 'imagefeatures316', 'imagefeatures317', 'imagefeatures318', 'imagefeatures319', 'imagefeatures320', 'imagefeatures321', 'imagefeatures322', 'imagefeatures323', 'imagefeatures324', 'imagefeatures325', 'imagefeatures326', 'imagefeatures327', 'imagefeatures328', 'imagefeatures329', 'imagefeatures330', 'imagefeatures331', 'imagefeatures332', 'imagefeatures333', 'imagefeatures334', 'imagefeatures335', 'imagefeatures336', 'imagefeatures337', 'imagefeatures338', 'imagefeatures339', 'imagefeatures340', 'imagefeatures341', 'imagefeatures342', 'imagefeatures343', 'imagefeatures344', 'imagefeatures345', 'imagefeatures346', 'imagefeatures347', 'imagefeatures348', 'imagefeatures349', 'imagefeatures350', 'imagefeatures351', 'imagefeatures352', 'imagefeatures353', 'imagefeatures354', 'imagefeatures355', 'imagefeatures356', 'imagefeatures357', 'imagefeatures358', 'imagefeatures359', 'imagefeatures360', 'imagefeatures361', 'imagefeatures362', 'imagefeatures363', 'imagefeatures364', 'imagefeatures365', 'imagefeatures366', 'imagefeatures367', 'imagefeatures368', 'imagefeatures369', 'imagefeatures370', 'imagefeatures371', 'imagefeatures372', 'imagefeatures373', 'imagefeatures374', 'imagefeatures375', 'imagefeatures376', 'imagefeatures377', 'imagefeatures378', 'imagefeatures379', 'imagefeatures380', 'imagefeatures381', 'imagefeatures382', 'imagefeatures383', 'imagefeatures384', 'imagefeatures385', 'imagefeatures386', 'imagefeatures387', 'imagefeatures388', 'imagefeatures389', 'imagefeatures390', 'imagefeatures391', 'imagefeatures392', 'imagefeatures393', 'imagefeatures394', 'imagefeatures395', 'imagefeatures396', 'imagefeatures397', 'imagefeatures398', 'imagefeatures399', 'imagefeatures400', 'imagefeatures401', 'imagefeatures402', 'imagefeatures403', 'imagefeatures404', 'imagefeatures405', 'imagefeatures406', 'imagefeatures407', 'imagefeatures408', 'imagefeatures409', 'imagefeatures410', 'imagefeatures411', 'imagefeatures412', 'imagefeatures413', 'imagefeatures414', 'imagefeatures415', 'imagefeatures416', 'imagefeatures417', 'imagefeatures418', 'imagefeatures419', 'imagefeatures420', 'imagefeatures421', 'imagefeatures422', 'imagefeatures423', 'imagefeatures424', 'imagefeatures425', 'imagefeatures426', 'imagefeatures427', 'imagefeatures428', 'imagefeatures429', 'imagefeatures430', 'imagefeatures431', 'imagefeatures432', 'imagefeatures433', 'imagefeatures434', 'imagefeatures435', 'imagefeatures436', 'imagefeatures437', 'imagefeatures438', 'imagefeatures439', 'imagefeatures440', 'imagefeatures441', 'imagefeatures442', 'imagefeatures443', 'imagefeatures444', 'imagefeatures445', 'imagefeatures446', 'imagefeatures447', 'imagefeatures448', 'imagefeatures449', 'imagefeatures450', 'imagefeatures451', 'imagefeatures452', 'imagefeatures453', 'imagefeatures454', 'imagefeatures455', 'imagefeatures456', 'imagefeatures457', 'imagefeatures458', 'imagefeatures459', 'imagefeatures460', 'imagefeatures461', 'imagefeatures462', 'imagefeatures463', 'imagefeatures464', 'imagefeatures465', 'imagefeatures466', 'imagefeatures467', 'imagefeatures468', 'imagefeatures469', 'imagefeatures470', 'imagefeatures471', 'imagefeatures472', 'imagefeatures473', 'imagefeatures474', 'imagefeatures475', 'imagefeatures476', 'imagefeatures477', 'imagefeatures478', 'imagefeatures479', 'imagefeatures480', 'imagefeatures481', 'imagefeatures482', 'imagefeatures483', 'imagefeatures484', 'imagefeatures485', 'imagefeatures486', 'imagefeatures487', 'imagefeatures488', 'imagefeatures489', 'imagefeatures490', 'imagefeatures491', 'imagefeatures492', 'imagefeatures493', 'imagefeatures494', 'imagefeatures495', 'imagefeatures496', 'imagefeatures497', 'imagefeatures498', 'imagefeatures499', 'imagefeatures500', 'imagefeatures501', 'imagefeatures502', 'imagefeatures503', 'imagefeatures504', 'imagefeatures505', 'imagefeatures506', 'imagefeatures507', 'imagefeatures508', 'imagefeatures509', 'imagefeatures510', 'imagefeatures511', 'imagefeatures512', 'imagefeatures513', 'imagefeatures514', 'imagefeatures515', 'imagefeatures516', 'imagefeatures517', 'imagefeatures518', 'imagefeatures519', 'imagefeatures520', 'imagefeatures521', 'imagefeatures522', 'imagefeatures523', 'imagefeatures524', 'imagefeatures525', 'imagefeatures526', 'imagefeatures527', 'imagefeatures528', 'imagefeatures529', 'imagefeatures530', 'imagefeatures531', 'imagefeatures532', 'imagefeatures533', 'imagefeatures534', 'imagefeatures535', 'imagefeatures536', 'imagefeatures537', 'imagefeatures538', 'imagefeatures539', 'imagefeatures540', 'imagefeatures541', 'imagefeatures542', 'imagefeatures543', 'imagefeatures544', 'imagefeatures545', 'imagefeatures546', 'imagefeatures547', 'imagefeatures548', 'imagefeatures549', 'imagefeatures550', 'imagefeatures551', 'imagefeatures552', 'imagefeatures553', 'imagefeatures554', 'imagefeatures555', 'imagefeatures556', 'imagefeatures557', 'imagefeatures558', 'imagefeatures559', 'imagefeatures560', 'imagefeatures561', 'imagefeatures562', 'imagefeatures563', 'imagefeatures564', 'imagefeatures565', 'imagefeatures566', 'imagefeatures567', 'imagefeatures568', 'imagefeatures569', 'imagefeatures570', 'imagefeatures571', 'imagefeatures572', 'imagefeatures573', 'imagefeatures574', 'imagefeatures575', 'imagefeatures576', 'imagefeatures577', 'imagefeatures578', 'imagefeatures579', 'imagefeatures580', 'imagefeatures581', 'imagefeatures582', 'imagefeatures583', 'imagefeatures584', 'imagefeatures585', 'imagefeatures586', 'imagefeatures587', 'imagefeatures588', 'imagefeatures589', 'imagefeatures590', 'imagefeatures591', 'imagefeatures592', 'imagefeatures593', 'imagefeatures594', 'imagefeatures595', 'imagefeatures596', 'imagefeatures597', 'imagefeatures598', 'imagefeatures599', 'imagefeatures600', 'imagefeatures601', 'imagefeatures602', 'imagefeatures603', 'imagefeatures604', 'imagefeatures605', 'imagefeatures606', 'imagefeatures607', 'imagefeatures608', 'imagefeatures609', 'imagefeatures610', 'imagefeatures611', 'imagefeatures612', 'imagefeatures613', 'imagefeatures614', 'imagefeatures615', 'imagefeatures616', 'imagefeatures617', 'imagefeatures618', 'imagefeatures619', 'imagefeatures620', 'imagefeatures621', 'imagefeatures622', 'imagefeatures623', 'imagefeatures624', 'imagefeatures625', 'imagefeatures626', 'imagefeatures627', 'imagefeatures628', 'imagefeatures629', 'imagefeatures630', 'imagefeatures631', 'imagefeatures632', 'imagefeatures633', 'imagefeatures634', 'imagefeatures635', 'imagefeatures636', 'imagefeatures637', 'imagefeatures638', 'imagefeatures639', 'imagefeatures640', 'imagefeatures641', 'imagefeatures642', 'imagefeatures643', 'imagefeatures644', 'imagefeatures645', 'imagefeatures646', 'imagefeatures647', 'imagefeatures648', 'imagefeatures649', 'imagefeatures650', 'imagefeatures651', 'imagefeatures652', 'imagefeatures653', 'imagefeatures654', 'imagefeatures655', 'imagefeatures656', 'imagefeatures657', 'imagefeatures658', 'imagefeatures659', 'imagefeatures660', 'imagefeatures661', 'imagefeatures662', 'imagefeatures663', 'imagefeatures664', 'imagefeatures665', 'imagefeatures666', 'imagefeatures667', 'imagefeatures668', 'imagefeatures669', 'imagefeatures670', 'imagefeatures671', 'imagefeatures672', 'imagefeatures673', 'imagefeatures674', 'imagefeatures675', 'imagefeatures676', 'imagefeatures677', 'imagefeatures678', 'imagefeatures679', 'imagefeatures680', 'imagefeatures681', 'imagefeatures682', 'imagefeatures683', 'imagefeatures684', 'imagefeatures685', 'imagefeatures686', 'imagefeatures687', 'imagefeatures688', 'imagefeatures689', 'imagefeatures690', 'imagefeatures691', 'imagefeatures692', 'imagefeatures693', 'imagefeatures694', 'imagefeatures695', 'imagefeatures696', 'imagefeatures697', 'imagefeatures698', 'imagefeatures699', 'imagefeatures700', 'imagefeatures701', 'imagefeatures702', 'imagefeatures703', 'imagefeatures704', 'imagefeatures705', 'imagefeatures706', 'imagefeatures707', 'imagefeatures708', 'imagefeatures709', 'imagefeatures710', 'imagefeatures711', 'imagefeatures712', 'imagefeatures713', 'imagefeatures714', 'imagefeatures715', 'imagefeatures716', 'imagefeatures717', 'imagefeatures718', 'imagefeatures719', 'imagefeatures720', 'imagefeatures721', 'imagefeatures722', 'imagefeatures723', 'imagefeatures724', 'imagefeatures725', 'imagefeatures726', 'imagefeatures727', 'imagefeatures728', 'imagefeatures729', 'imagefeatures730', 'imagefeatures731', 'imagefeatures732', 'imagefeatures733', 'imagefeatures734', 'imagefeatures735', 'imagefeatures736', 'imagefeatures737', 'imagefeatures738', 'imagefeatures739', 'imagefeatures740', 'imagefeatures741', 'imagefeatures742', 'imagefeatures743', 'imagefeatures744', 'imagefeatures745', 'imagefeatures746', 'imagefeatures747', 'imagefeatures748', 'imagefeatures749', 'imagefeatures750', 'imagefeatures751', 'imagefeatures752', 'imagefeatures753', 'imagefeatures754', 'imagefeatures755', 'imagefeatures756', 'imagefeatures757', 'imagefeatures758', 'imagefeatures759', 'imagefeatures760', 'imagefeatures761', 'imagefeatures762', 'imagefeatures763', 'imagefeatures764', 'imagefeatures765', 'imagefeatures766', 'imagefeatures767', 'imagefeatures768', 'imagefeatures769', 'imagefeatures770', 'imagefeatures771', 'imagefeatures772', 'imagefeatures773', 'imagefeatures774', 'imagefeatures775', 'imagefeatures776', 'imagefeatures777', 'imagefeatures778', 'imagefeatures779', 'imagefeatures780', 'imagefeatures781', 'imagefeatures782', 'imagefeatures783', 'imagefeatures784', 'imagefeatures785', 'imagefeatures786', 'imagefeatures787', 'imagefeatures788', 'imagefeatures789', 'imagefeatures790', 'imagefeatures791', 'imagefeatures792', 'imagefeatures793', 'imagefeatures794', 'imagefeatures795', 'imagefeatures796', 'imagefeatures797', 'imagefeatures798', 'imagefeatures799', 'imagefeatures800', 'imagefeatures801', 'imagefeatures802', 'imagefeatures803', 'imagefeatures804', 'imagefeatures805', 'imagefeatures806', 'imagefeatures807', 'imagefeatures808', 'imagefeatures809', 'imagefeatures810', 'imagefeatures811', 'imagefeatures812', 'imagefeatures813', 'imagefeatures814', 'imagefeatures815', 'imagefeatures816', 'imagefeatures817', 'imagefeatures818', 'imagefeatures819', 'imagefeatures820', 'imagefeatures821', 'imagefeatures822', 'imagefeatures823', 'imagefeatures824', 'imagefeatures825', 'imagefeatures826', 'imagefeatures827', 'imagefeatures828', 'imagefeatures829', 'imagefeatures830', 'imagefeatures831', 'imagefeatures832', 'imagefeatures833', 'imagefeatures834', 'imagefeatures835', 'imagefeatures836', 'imagefeatures837', 'imagefeatures838', 'imagefeatures839', 'imagefeatures840', 'imagefeatures841', 'imagefeatures842', 'imagefeatures843', 'imagefeatures844', 'imagefeatures845', 'imagefeatures846', 'imagefeatures847', 'imagefeatures848', 'imagefeatures849', 'imagefeatures850', 'imagefeatures851', 'imagefeatures852', 'imagefeatures853', 'imagefeatures854', 'imagefeatures855', 'imagefeatures856', 'imagefeatures857', 'imagefeatures858', 'imagefeatures859', 'imagefeatures860', 'imagefeatures861', 'imagefeatures862', 'imagefeatures863', 'imagefeatures864', 'imagefeatures865', 'imagefeatures866', 'imagefeatures867', 'imagefeatures868', 'imagefeatures869', 'imagefeatures870', 'imagefeatures871', 'imagefeatures872', 'imagefeatures873', 'imagefeatures874', 'imagefeatures875', 'imagefeatures876', 'imagefeatures877', 'imagefeatures878', 'imagefeatures879', 'imagefeatures880', 'imagefeatures881', 'imagefeatures882', 'imagefeatures883', 'imagefeatures884', 'imagefeatures885', 'imagefeatures886', 'imagefeatures887', 'imagefeatures888', 'imagefeatures889', 'imagefeatures890', 'imagefeatures891', 'imagefeatures892', 'imagefeatures893', 'imagefeatures894', 'imagefeatures895', 'imagefeatures896', 'imagefeatures897', 'imagefeatures898', 'imagefeatures899', 'imagefeatures900', 'imagefeatures901', 'imagefeatures902', 'imagefeatures903', 'imagefeatures904', 'imagefeatures905', 'imagefeatures906', 'imagefeatures907', 'imagefeatures908', 'imagefeatures909', 'imagefeatures910', 'imagefeatures911', 'imagefeatures912', 'imagefeatures913', 'imagefeatures914', 'imagefeatures915', 'imagefeatures916', 'imagefeatures917', 'imagefeatures918', 'imagefeatures919', 'imagefeatures920', 'imagefeatures921', 'imagefeatures922', 'imagefeatures923', 'imagefeatures924', 'imagefeatures925', 'imagefeatures926', 'imagefeatures927', 'imagefeatures928', 'imagefeatures929', 'imagefeatures930', 'imagefeatures931', 'imagefeatures932', 'imagefeatures933', 'imagefeatures934', 'imagefeatures935', 'imagefeatures936', 'imagefeatures937', 'imagefeatures938', 'imagefeatures939', 'imagefeatures940', 'imagefeatures941', 'imagefeatures942', 'imagefeatures943', 'imagefeatures944', 'imagefeatures945', 'imagefeatures946', 'imagefeatures947', 'imagefeatures948', 'imagefeatures949', 'imagefeatures950', 'imagefeatures951', 'imagefeatures952', 'imagefeatures953', 'imagefeatures954', 'imagefeatures955', 'imagefeatures956', 'imagefeatures957', 'imagefeatures958', 'imagefeatures959', 'imagefeatures960', 'imagefeatures961', 'imagefeatures962', 'imagefeatures963', 'imagefeatures964', 'imagefeatures965', 'imagefeatures966', 'imagefeatures967', 'imagefeatures968', 'imagefeatures969', 'imagefeatures970', 'imagefeatures971', 'imagefeatures972', 'imagefeatures973', 'imagefeatures974', 'imagefeatures975', 'imagefeatures976', 'imagefeatures977', 'imagefeatures978', 'imagefeatures979', 'imagefeatures980', 'imagefeatures981', 'imagefeatures982', 'imagefeatures983', 'imagefeatures984', 'imagefeatures985', 'imagefeatures986', 'imagefeatures987', 'imagefeatures988', 'imagefeatures989', 'imagefeatures990', 'imagefeatures991', 'imagefeatures992', 'imagefeatures993', 'imagefeatures994', 'imagefeatures995', 'imagefeatures996', 'imagefeatures997', 'imagefeatures998', 'imagefeatures999', 'imagefeatures1000'};
predictors = inputTable(:, predictorNames);
response = inputTable.Labels;
isCategoricalPredictor = [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false];

% Train a classifier
% This code specifies all the classifier options and trains the classifier.
subspaceDimension = max(1, min(500, width(predictors) - 1));
classificationEnsemble = fitcensemble(...
    predictors, ...
    response, ...
    'Method', 'Subspace', ...
    'NumLearningCycles', 30, ...
    'Learners', 'knn', ...
    'NPredToSample', subspaceDimension, ...
    'ClassNames', categorical({'Fall'; 'Not Fallen'}));

% Create the result struct with predict function
predictorExtractionFcn = @(t) t(:, predictorNames);
ensemblePredictFcn = @(x) predict(classificationEnsemble, x);
trainedClassifier.predictFcn = @(x) ensemblePredictFcn(predictorExtractionFcn(x));

% Add additional fields to the result struct
trainedClassifier.RequiredVariables = {'imagefeatures1', 'imagefeatures10', 'imagefeatures100', 'imagefeatures1000', 'imagefeatures101', 'imagefeatures102', 'imagefeatures103', 'imagefeatures104', 'imagefeatures105', 'imagefeatures106', 'imagefeatures107', 'imagefeatures108', 'imagefeatures109', 'imagefeatures11', 'imagefeatures110', 'imagefeatures111', 'imagefeatures112', 'imagefeatures113', 'imagefeatures114', 'imagefeatures115', 'imagefeatures116', 'imagefeatures117', 'imagefeatures118', 'imagefeatures119', 'imagefeatures12', 'imagefeatures120', 'imagefeatures121', 'imagefeatures122', 'imagefeatures123', 'imagefeatures124', 'imagefeatures125', 'imagefeatures126', 'imagefeatures127', 'imagefeatures128', 'imagefeatures129', 'imagefeatures13', 'imagefeatures130', 'imagefeatures131', 'imagefeatures132', 'imagefeatures133', 'imagefeatures134', 'imagefeatures135', 'imagefeatures136', 'imagefeatures137', 'imagefeatures138', 'imagefeatures139', 'imagefeatures14', 'imagefeatures140', 'imagefeatures141', 'imagefeatures142', 'imagefeatures143', 'imagefeatures144', 'imagefeatures145', 'imagefeatures146', 'imagefeatures147', 'imagefeatures148', 'imagefeatures149', 'imagefeatures15', 'imagefeatures150', 'imagefeatures151', 'imagefeatures152', 'imagefeatures153', 'imagefeatures154', 'imagefeatures155', 'imagefeatures156', 'imagefeatures157', 'imagefeatures158', 'imagefeatures159', 'imagefeatures16', 'imagefeatures160', 'imagefeatures161', 'imagefeatures162', 'imagefeatures163', 'imagefeatures164', 'imagefeatures165', 'imagefeatures166', 'imagefeatures167', 'imagefeatures168', 'imagefeatures169', 'imagefeatures17', 'imagefeatures170', 'imagefeatures171', 'imagefeatures172', 'imagefeatures173', 'imagefeatures174', 'imagefeatures175', 'imagefeatures176', 'imagefeatures177', 'imagefeatures178', 'imagefeatures179', 'imagefeatures18', 'imagefeatures180', 'imagefeatures181', 'imagefeatures182', 'imagefeatures183', 'imagefeatures184', 'imagefeatures185', 'imagefeatures186', 'imagefeatures187', 'imagefeatures188', 'imagefeatures189', 'imagefeatures19', 'imagefeatures190', 'imagefeatures191', 'imagefeatures192', 'imagefeatures193', 'imagefeatures194', 'imagefeatures195', 'imagefeatures196', 'imagefeatures197', 'imagefeatures198', 'imagefeatures199', 'imagefeatures2', 'imagefeatures20', 'imagefeatures200', 'imagefeatures201', 'imagefeatures202', 'imagefeatures203', 'imagefeatures204', 'imagefeatures205', 'imagefeatures206', 'imagefeatures207', 'imagefeatures208', 'imagefeatures209', 'imagefeatures21', 'imagefeatures210', 'imagefeatures211', 'imagefeatures212', 'imagefeatures213', 'imagefeatures214', 'imagefeatures215', 'imagefeatures216', 'imagefeatures217', 'imagefeatures218', 'imagefeatures219', 'imagefeatures22', 'imagefeatures220', 'imagefeatures221', 'imagefeatures222', 'imagefeatures223', 'imagefeatures224', 'imagefeatures225', 'imagefeatures226', 'imagefeatures227', 'imagefeatures228', 'imagefeatures229', 'imagefeatures23', 'imagefeatures230', 'imagefeatures231', 'imagefeatures232', 'imagefeatures233', 'imagefeatures234', 'imagefeatures235', 'imagefeatures236', 'imagefeatures237', 'imagefeatures238', 'imagefeatures239', 'imagefeatures24', 'imagefeatures240', 'imagefeatures241', 'imagefeatures242', 'imagefeatures243', 'imagefeatures244', 'imagefeatures245', 'imagefeatures246', 'imagefeatures247', 'imagefeatures248', 'imagefeatures249', 'imagefeatures25', 'imagefeatures250', 'imagefeatures251', 'imagefeatures252', 'imagefeatures253', 'imagefeatures254', 'imagefeatures255', 'imagefeatures256', 'imagefeatures257', 'imagefeatures258', 'imagefeatures259', 'imagefeatures26', 'imagefeatures260', 'imagefeatures261', 'imagefeatures262', 'imagefeatures263', 'imagefeatures264', 'imagefeatures265', 'imagefeatures266', 'imagefeatures267', 'imagefeatures268', 'imagefeatures269', 'imagefeatures27', 'imagefeatures270', 'imagefeatures271', 'imagefeatures272', 'imagefeatures273', 'imagefeatures274', 'imagefeatures275', 'imagefeatures276', 'imagefeatures277', 'imagefeatures278', 'imagefeatures279', 'imagefeatures28', 'imagefeatures280', 'imagefeatures281', 'imagefeatures282', 'imagefeatures283', 'imagefeatures284', 'imagefeatures285', 'imagefeatures286', 'imagefeatures287', 'imagefeatures288', 'imagefeatures289', 'imagefeatures29', 'imagefeatures290', 'imagefeatures291', 'imagefeatures292', 'imagefeatures293', 'imagefeatures294', 'imagefeatures295', 'imagefeatures296', 'imagefeatures297', 'imagefeatures298', 'imagefeatures299', 'imagefeatures3', 'imagefeatures30', 'imagefeatures300', 'imagefeatures301', 'imagefeatures302', 'imagefeatures303', 'imagefeatures304', 'imagefeatures305', 'imagefeatures306', 'imagefeatures307', 'imagefeatures308', 'imagefeatures309', 'imagefeatures31', 'imagefeatures310', 'imagefeatures311', 'imagefeatures312', 'imagefeatures313', 'imagefeatures314', 'imagefeatures315', 'imagefeatures316', 'imagefeatures317', 'imagefeatures318', 'imagefeatures319', 'imagefeatures32', 'imagefeatures320', 'imagefeatures321', 'imagefeatures322', 'imagefeatures323', 'imagefeatures324', 'imagefeatures325', 'imagefeatures326', 'imagefeatures327', 'imagefeatures328', 'imagefeatures329', 'imagefeatures33', 'imagefeatures330', 'imagefeatures331', 'imagefeatures332', 'imagefeatures333', 'imagefeatures334', 'imagefeatures335', 'imagefeatures336', 'imagefeatures337', 'imagefeatures338', 'imagefeatures339', 'imagefeatures34', 'imagefeatures340', 'imagefeatures341', 'imagefeatures342', 'imagefeatures343', 'imagefeatures344', 'imagefeatures345', 'imagefeatures346', 'imagefeatures347', 'imagefeatures348', 'imagefeatures349', 'imagefeatures35', 'imagefeatures350', 'imagefeatures351', 'imagefeatures352', 'imagefeatures353', 'imagefeatures354', 'imagefeatures355', 'imagefeatures356', 'imagefeatures357', 'imagefeatures358', 'imagefeatures359', 'imagefeatures36', 'imagefeatures360', 'imagefeatures361', 'imagefeatures362', 'imagefeatures363', 'imagefeatures364', 'imagefeatures365', 'imagefeatures366', 'imagefeatures367', 'imagefeatures368', 'imagefeatures369', 'imagefeatures37', 'imagefeatures370', 'imagefeatures371', 'imagefeatures372', 'imagefeatures373', 'imagefeatures374', 'imagefeatures375', 'imagefeatures376', 'imagefeatures377', 'imagefeatures378', 'imagefeatures379', 'imagefeatures38', 'imagefeatures380', 'imagefeatures381', 'imagefeatures382', 'imagefeatures383', 'imagefeatures384', 'imagefeatures385', 'imagefeatures386', 'imagefeatures387', 'imagefeatures388', 'imagefeatures389', 'imagefeatures39', 'imagefeatures390', 'imagefeatures391', 'imagefeatures392', 'imagefeatures393', 'imagefeatures394', 'imagefeatures395', 'imagefeatures396', 'imagefeatures397', 'imagefeatures398', 'imagefeatures399', 'imagefeatures4', 'imagefeatures40', 'imagefeatures400', 'imagefeatures401', 'imagefeatures402', 'imagefeatures403', 'imagefeatures404', 'imagefeatures405', 'imagefeatures406', 'imagefeatures407', 'imagefeatures408', 'imagefeatures409', 'imagefeatures41', 'imagefeatures410', 'imagefeatures411', 'imagefeatures412', 'imagefeatures413', 'imagefeatures414', 'imagefeatures415', 'imagefeatures416', 'imagefeatures417', 'imagefeatures418', 'imagefeatures419', 'imagefeatures42', 'imagefeatures420', 'imagefeatures421', 'imagefeatures422', 'imagefeatures423', 'imagefeatures424', 'imagefeatures425', 'imagefeatures426', 'imagefeatures427', 'imagefeatures428', 'imagefeatures429', 'imagefeatures43', 'imagefeatures430', 'imagefeatures431', 'imagefeatures432', 'imagefeatures433', 'imagefeatures434', 'imagefeatures435', 'imagefeatures436', 'imagefeatures437', 'imagefeatures438', 'imagefeatures439', 'imagefeatures44', 'imagefeatures440', 'imagefeatures441', 'imagefeatures442', 'imagefeatures443', 'imagefeatures444', 'imagefeatures445', 'imagefeatures446', 'imagefeatures447', 'imagefeatures448', 'imagefeatures449', 'imagefeatures45', 'imagefeatures450', 'imagefeatures451', 'imagefeatures452', 'imagefeatures453', 'imagefeatures454', 'imagefeatures455', 'imagefeatures456', 'imagefeatures457', 'imagefeatures458', 'imagefeatures459', 'imagefeatures46', 'imagefeatures460', 'imagefeatures461', 'imagefeatures462', 'imagefeatures463', 'imagefeatures464', 'imagefeatures465', 'imagefeatures466', 'imagefeatures467', 'imagefeatures468', 'imagefeatures469', 'imagefeatures47', 'imagefeatures470', 'imagefeatures471', 'imagefeatures472', 'imagefeatures473', 'imagefeatures474', 'imagefeatures475', 'imagefeatures476', 'imagefeatures477', 'imagefeatures478', 'imagefeatures479', 'imagefeatures48', 'imagefeatures480', 'imagefeatures481', 'imagefeatures482', 'imagefeatures483', 'imagefeatures484', 'imagefeatures485', 'imagefeatures486', 'imagefeatures487', 'imagefeatures488', 'imagefeatures489', 'imagefeatures49', 'imagefeatures490', 'imagefeatures491', 'imagefeatures492', 'imagefeatures493', 'imagefeatures494', 'imagefeatures495', 'imagefeatures496', 'imagefeatures497', 'imagefeatures498', 'imagefeatures499', 'imagefeatures5', 'imagefeatures50', 'imagefeatures500', 'imagefeatures501', 'imagefeatures502', 'imagefeatures503', 'imagefeatures504', 'imagefeatures505', 'imagefeatures506', 'imagefeatures507', 'imagefeatures508', 'imagefeatures509', 'imagefeatures51', 'imagefeatures510', 'imagefeatures511', 'imagefeatures512', 'imagefeatures513', 'imagefeatures514', 'imagefeatures515', 'imagefeatures516', 'imagefeatures517', 'imagefeatures518', 'imagefeatures519', 'imagefeatures52', 'imagefeatures520', 'imagefeatures521', 'imagefeatures522', 'imagefeatures523', 'imagefeatures524', 'imagefeatures525', 'imagefeatures526', 'imagefeatures527', 'imagefeatures528', 'imagefeatures529', 'imagefeatures53', 'imagefeatures530', 'imagefeatures531', 'imagefeatures532', 'imagefeatures533', 'imagefeatures534', 'imagefeatures535', 'imagefeatures536', 'imagefeatures537', 'imagefeatures538', 'imagefeatures539', 'imagefeatures54', 'imagefeatures540', 'imagefeatures541', 'imagefeatures542', 'imagefeatures543', 'imagefeatures544', 'imagefeatures545', 'imagefeatures546', 'imagefeatures547', 'imagefeatures548', 'imagefeatures549', 'imagefeatures55', 'imagefeatures550', 'imagefeatures551', 'imagefeatures552', 'imagefeatures553', 'imagefeatures554', 'imagefeatures555', 'imagefeatures556', 'imagefeatures557', 'imagefeatures558', 'imagefeatures559', 'imagefeatures56', 'imagefeatures560', 'imagefeatures561', 'imagefeatures562', 'imagefeatures563', 'imagefeatures564', 'imagefeatures565', 'imagefeatures566', 'imagefeatures567', 'imagefeatures568', 'imagefeatures569', 'imagefeatures57', 'imagefeatures570', 'imagefeatures571', 'imagefeatures572', 'imagefeatures573', 'imagefeatures574', 'imagefeatures575', 'imagefeatures576', 'imagefeatures577', 'imagefeatures578', 'imagefeatures579', 'imagefeatures58', 'imagefeatures580', 'imagefeatures581', 'imagefeatures582', 'imagefeatures583', 'imagefeatures584', 'imagefeatures585', 'imagefeatures586', 'imagefeatures587', 'imagefeatures588', 'imagefeatures589', 'imagefeatures59', 'imagefeatures590', 'imagefeatures591', 'imagefeatures592', 'imagefeatures593', 'imagefeatures594', 'imagefeatures595', 'imagefeatures596', 'imagefeatures597', 'imagefeatures598', 'imagefeatures599', 'imagefeatures6', 'imagefeatures60', 'imagefeatures600', 'imagefeatures601', 'imagefeatures602', 'imagefeatures603', 'imagefeatures604', 'imagefeatures605', 'imagefeatures606', 'imagefeatures607', 'imagefeatures608', 'imagefeatures609', 'imagefeatures61', 'imagefeatures610', 'imagefeatures611', 'imagefeatures612', 'imagefeatures613', 'imagefeatures614', 'imagefeatures615', 'imagefeatures616', 'imagefeatures617', 'imagefeatures618', 'imagefeatures619', 'imagefeatures62', 'imagefeatures620', 'imagefeatures621', 'imagefeatures622', 'imagefeatures623', 'imagefeatures624', 'imagefeatures625', 'imagefeatures626', 'imagefeatures627', 'imagefeatures628', 'imagefeatures629', 'imagefeatures63', 'imagefeatures630', 'imagefeatures631', 'imagefeatures632', 'imagefeatures633', 'imagefeatures634', 'imagefeatures635', 'imagefeatures636', 'imagefeatures637', 'imagefeatures638', 'imagefeatures639', 'imagefeatures64', 'imagefeatures640', 'imagefeatures641', 'imagefeatures642', 'imagefeatures643', 'imagefeatures644', 'imagefeatures645', 'imagefeatures646', 'imagefeatures647', 'imagefeatures648', 'imagefeatures649', 'imagefeatures65', 'imagefeatures650', 'imagefeatures651', 'imagefeatures652', 'imagefeatures653', 'imagefeatures654', 'imagefeatures655', 'imagefeatures656', 'imagefeatures657', 'imagefeatures658', 'imagefeatures659', 'imagefeatures66', 'imagefeatures660', 'imagefeatures661', 'imagefeatures662', 'imagefeatures663', 'imagefeatures664', 'imagefeatures665', 'imagefeatures666', 'imagefeatures667', 'imagefeatures668', 'imagefeatures669', 'imagefeatures67', 'imagefeatures670', 'imagefeatures671', 'imagefeatures672', 'imagefeatures673', 'imagefeatures674', 'imagefeatures675', 'imagefeatures676', 'imagefeatures677', 'imagefeatures678', 'imagefeatures679', 'imagefeatures68', 'imagefeatures680', 'imagefeatures681', 'imagefeatures682', 'imagefeatures683', 'imagefeatures684', 'imagefeatures685', 'imagefeatures686', 'imagefeatures687', 'imagefeatures688', 'imagefeatures689', 'imagefeatures69', 'imagefeatures690', 'imagefeatures691', 'imagefeatures692', 'imagefeatures693', 'imagefeatures694', 'imagefeatures695', 'imagefeatures696', 'imagefeatures697', 'imagefeatures698', 'imagefeatures699', 'imagefeatures7', 'imagefeatures70', 'imagefeatures700', 'imagefeatures701', 'imagefeatures702', 'imagefeatures703', 'imagefeatures704', 'imagefeatures705', 'imagefeatures706', 'imagefeatures707', 'imagefeatures708', 'imagefeatures709', 'imagefeatures71', 'imagefeatures710', 'imagefeatures711', 'imagefeatures712', 'imagefeatures713', 'imagefeatures714', 'imagefeatures715', 'imagefeatures716', 'imagefeatures717', 'imagefeatures718', 'imagefeatures719', 'imagefeatures72', 'imagefeatures720', 'imagefeatures721', 'imagefeatures722', 'imagefeatures723', 'imagefeatures724', 'imagefeatures725', 'imagefeatures726', 'imagefeatures727', 'imagefeatures728', 'imagefeatures729', 'imagefeatures73', 'imagefeatures730', 'imagefeatures731', 'imagefeatures732', 'imagefeatures733', 'imagefeatures734', 'imagefeatures735', 'imagefeatures736', 'imagefeatures737', 'imagefeatures738', 'imagefeatures739', 'imagefeatures74', 'imagefeatures740', 'imagefeatures741', 'imagefeatures742', 'imagefeatures743', 'imagefeatures744', 'imagefeatures745', 'imagefeatures746', 'imagefeatures747', 'imagefeatures748', 'imagefeatures749', 'imagefeatures75', 'imagefeatures750', 'imagefeatures751', 'imagefeatures752', 'imagefeatures753', 'imagefeatures754', 'imagefeatures755', 'imagefeatures756', 'imagefeatures757', 'imagefeatures758', 'imagefeatures759', 'imagefeatures76', 'imagefeatures760', 'imagefeatures761', 'imagefeatures762', 'imagefeatures763', 'imagefeatures764', 'imagefeatures765', 'imagefeatures766', 'imagefeatures767', 'imagefeatures768', 'imagefeatures769', 'imagefeatures77', 'imagefeatures770', 'imagefeatures771', 'imagefeatures772', 'imagefeatures773', 'imagefeatures774', 'imagefeatures775', 'imagefeatures776', 'imagefeatures777', 'imagefeatures778', 'imagefeatures779', 'imagefeatures78', 'imagefeatures780', 'imagefeatures781', 'imagefeatures782', 'imagefeatures783', 'imagefeatures784', 'imagefeatures785', 'imagefeatures786', 'imagefeatures787', 'imagefeatures788', 'imagefeatures789', 'imagefeatures79', 'imagefeatures790', 'imagefeatures791', 'imagefeatures792', 'imagefeatures793', 'imagefeatures794', 'imagefeatures795', 'imagefeatures796', 'imagefeatures797', 'imagefeatures798', 'imagefeatures799', 'imagefeatures8', 'imagefeatures80', 'imagefeatures800', 'imagefeatures801', 'imagefeatures802', 'imagefeatures803', 'imagefeatures804', 'imagefeatures805', 'imagefeatures806', 'imagefeatures807', 'imagefeatures808', 'imagefeatures809', 'imagefeatures81', 'imagefeatures810', 'imagefeatures811', 'imagefeatures812', 'imagefeatures813', 'imagefeatures814', 'imagefeatures815', 'imagefeatures816', 'imagefeatures817', 'imagefeatures818', 'imagefeatures819', 'imagefeatures82', 'imagefeatures820', 'imagefeatures821', 'imagefeatures822', 'imagefeatures823', 'imagefeatures824', 'imagefeatures825', 'imagefeatures826', 'imagefeatures827', 'imagefeatures828', 'imagefeatures829', 'imagefeatures83', 'imagefeatures830', 'imagefeatures831', 'imagefeatures832', 'imagefeatures833', 'imagefeatures834', 'imagefeatures835', 'imagefeatures836', 'imagefeatures837', 'imagefeatures838', 'imagefeatures839', 'imagefeatures84', 'imagefeatures840', 'imagefeatures841', 'imagefeatures842', 'imagefeatures843', 'imagefeatures844', 'imagefeatures845', 'imagefeatures846', 'imagefeatures847', 'imagefeatures848', 'imagefeatures849', 'imagefeatures85', 'imagefeatures850', 'imagefeatures851', 'imagefeatures852', 'imagefeatures853', 'imagefeatures854', 'imagefeatures855', 'imagefeatures856', 'imagefeatures857', 'imagefeatures858', 'imagefeatures859', 'imagefeatures86', 'imagefeatures860', 'imagefeatures861', 'imagefeatures862', 'imagefeatures863', 'imagefeatures864', 'imagefeatures865', 'imagefeatures866', 'imagefeatures867', 'imagefeatures868', 'imagefeatures869', 'imagefeatures87', 'imagefeatures870', 'imagefeatures871', 'imagefeatures872', 'imagefeatures873', 'imagefeatures874', 'imagefeatures875', 'imagefeatures876', 'imagefeatures877', 'imagefeatures878', 'imagefeatures879', 'imagefeatures88', 'imagefeatures880', 'imagefeatures881', 'imagefeatures882', 'imagefeatures883', 'imagefeatures884', 'imagefeatures885', 'imagefeatures886', 'imagefeatures887', 'imagefeatures888', 'imagefeatures889', 'imagefeatures89', 'imagefeatures890', 'imagefeatures891', 'imagefeatures892', 'imagefeatures893', 'imagefeatures894', 'imagefeatures895', 'imagefeatures896', 'imagefeatures897', 'imagefeatures898', 'imagefeatures899', 'imagefeatures9', 'imagefeatures90', 'imagefeatures900', 'imagefeatures901', 'imagefeatures902', 'imagefeatures903', 'imagefeatures904', 'imagefeatures905', 'imagefeatures906', 'imagefeatures907', 'imagefeatures908', 'imagefeatures909', 'imagefeatures91', 'imagefeatures910', 'imagefeatures911', 'imagefeatures912', 'imagefeatures913', 'imagefeatures914', 'imagefeatures915', 'imagefeatures916', 'imagefeatures917', 'imagefeatures918', 'imagefeatures919', 'imagefeatures92', 'imagefeatures920', 'imagefeatures921', 'imagefeatures922', 'imagefeatures923', 'imagefeatures924', 'imagefeatures925', 'imagefeatures926', 'imagefeatures927', 'imagefeatures928', 'imagefeatures929', 'imagefeatures93', 'imagefeatures930', 'imagefeatures931', 'imagefeatures932', 'imagefeatures933', 'imagefeatures934', 'imagefeatures935', 'imagefeatures936', 'imagefeatures937', 'imagefeatures938', 'imagefeatures939', 'imagefeatures94', 'imagefeatures940', 'imagefeatures941', 'imagefeatures942', 'imagefeatures943', 'imagefeatures944', 'imagefeatures945', 'imagefeatures946', 'imagefeatures947', 'imagefeatures948', 'imagefeatures949', 'imagefeatures95', 'imagefeatures950', 'imagefeatures951', 'imagefeatures952', 'imagefeatures953', 'imagefeatures954', 'imagefeatures955', 'imagefeatures956', 'imagefeatures957', 'imagefeatures958', 'imagefeatures959', 'imagefeatures96', 'imagefeatures960', 'imagefeatures961', 'imagefeatures962', 'imagefeatures963', 'imagefeatures964', 'imagefeatures965', 'imagefeatures966', 'imagefeatures967', 'imagefeatures968', 'imagefeatures969', 'imagefeatures97', 'imagefeatures970', 'imagefeatures971', 'imagefeatures972', 'imagefeatures973', 'imagefeatures974', 'imagefeatures975', 'imagefeatures976', 'imagefeatures977', 'imagefeatures978', 'imagefeatures979', 'imagefeatures98', 'imagefeatures980', 'imagefeatures981', 'imagefeatures982', 'imagefeatures983', 'imagefeatures984', 'imagefeatures985', 'imagefeatures986', 'imagefeatures987', 'imagefeatures988', 'imagefeatures989', 'imagefeatures99', 'imagefeatures990', 'imagefeatures991', 'imagefeatures992', 'imagefeatures993', 'imagefeatures994', 'imagefeatures995', 'imagefeatures996', 'imagefeatures997', 'imagefeatures998', 'imagefeatures999'};
trainedClassifier.ClassificationEnsemble = classificationEnsemble;
trainedClassifier.About = 'This struct is a trained model exported from Classification Learner R2021b.';
trainedClassifier.HowToPredict = sprintf('To make predictions on a new table, T, use: \n  yfit = c.predictFcn(T) \nreplacing ''c'' with the name of the variable that is this struct, e.g. ''trainedModel''. \n \nThe table, T, must contain the variables returned by: \n  c.RequiredVariables \nVariable formats (e.g. matrix/vector, datatype) must match the original training data. \nAdditional variables are ignored. \n \nFor more information, see <a href="matlab:helpview(fullfile(docroot, ''stats'', ''stats.map''), ''appclassification_exportmodeltoworkspace'')">How to predict using an exported model</a>.');

% Extract predictors and response
% This code processes the data into the right shape for training the
% model.
inputTable = trainingData;
predictorNames = {'imagefeatures1', 'imagefeatures2', 'imagefeatures3', 'imagefeatures4', 'imagefeatures5', 'imagefeatures6', 'imagefeatures7', 'imagefeatures8', 'imagefeatures9', 'imagefeatures10', 'imagefeatures11', 'imagefeatures12', 'imagefeatures13', 'imagefeatures14', 'imagefeatures15', 'imagefeatures16', 'imagefeatures17', 'imagefeatures18', 'imagefeatures19', 'imagefeatures20', 'imagefeatures21', 'imagefeatures22', 'imagefeatures23', 'imagefeatures24', 'imagefeatures25', 'imagefeatures26', 'imagefeatures27', 'imagefeatures28', 'imagefeatures29', 'imagefeatures30', 'imagefeatures31', 'imagefeatures32', 'imagefeatures33', 'imagefeatures34', 'imagefeatures35', 'imagefeatures36', 'imagefeatures37', 'imagefeatures38', 'imagefeatures39', 'imagefeatures40', 'imagefeatures41', 'imagefeatures42', 'imagefeatures43', 'imagefeatures44', 'imagefeatures45', 'imagefeatures46', 'imagefeatures47', 'imagefeatures48', 'imagefeatures49', 'imagefeatures50', 'imagefeatures51', 'imagefeatures52', 'imagefeatures53', 'imagefeatures54', 'imagefeatures55', 'imagefeatures56', 'imagefeatures57', 'imagefeatures58', 'imagefeatures59', 'imagefeatures60', 'imagefeatures61', 'imagefeatures62', 'imagefeatures63', 'imagefeatures64', 'imagefeatures65', 'imagefeatures66', 'imagefeatures67', 'imagefeatures68', 'imagefeatures69', 'imagefeatures70', 'imagefeatures71', 'imagefeatures72', 'imagefeatures73', 'imagefeatures74', 'imagefeatures75', 'imagefeatures76', 'imagefeatures77', 'imagefeatures78', 'imagefeatures79', 'imagefeatures80', 'imagefeatures81', 'imagefeatures82', 'imagefeatures83', 'imagefeatures84', 'imagefeatures85', 'imagefeatures86', 'imagefeatures87', 'imagefeatures88', 'imagefeatures89', 'imagefeatures90', 'imagefeatures91', 'imagefeatures92', 'imagefeatures93', 'imagefeatures94', 'imagefeatures95', 'imagefeatures96', 'imagefeatures97', 'imagefeatures98', 'imagefeatures99', 'imagefeatures100', 'imagefeatures101', 'imagefeatures102', 'imagefeatures103', 'imagefeatures104', 'imagefeatures105', 'imagefeatures106', 'imagefeatures107', 'imagefeatures108', 'imagefeatures109', 'imagefeatures110', 'imagefeatures111', 'imagefeatures112', 'imagefeatures113', 'imagefeatures114', 'imagefeatures115', 'imagefeatures116', 'imagefeatures117', 'imagefeatures118', 'imagefeatures119', 'imagefeatures120', 'imagefeatures121', 'imagefeatures122', 'imagefeatures123', 'imagefeatures124', 'imagefeatures125', 'imagefeatures126', 'imagefeatures127', 'imagefeatures128', 'imagefeatures129', 'imagefeatures130', 'imagefeatures131', 'imagefeatures132', 'imagefeatures133', 'imagefeatures134', 'imagefeatures135', 'imagefeatures136', 'imagefeatures137', 'imagefeatures138', 'imagefeatures139', 'imagefeatures140', 'imagefeatures141', 'imagefeatures142', 'imagefeatures143', 'imagefeatures144', 'imagefeatures145', 'imagefeatures146', 'imagefeatures147', 'imagefeatures148', 'imagefeatures149', 'imagefeatures150', 'imagefeatures151', 'imagefeatures152', 'imagefeatures153', 'imagefeatures154', 'imagefeatures155', 'imagefeatures156', 'imagefeatures157', 'imagefeatures158', 'imagefeatures159', 'imagefeatures160', 'imagefeatures161', 'imagefeatures162', 'imagefeatures163', 'imagefeatures164', 'imagefeatures165', 'imagefeatures166', 'imagefeatures167', 'imagefeatures168', 'imagefeatures169', 'imagefeatures170', 'imagefeatures171', 'imagefeatures172', 'imagefeatures173', 'imagefeatures174', 'imagefeatures175', 'imagefeatures176', 'imagefeatures177', 'imagefeatures178', 'imagefeatures179', 'imagefeatures180', 'imagefeatures181', 'imagefeatures182', 'imagefeatures183', 'imagefeatures184', 'imagefeatures185', 'imagefeatures186', 'imagefeatures187', 'imagefeatures188', 'imagefeatures189', 'imagefeatures190', 'imagefeatures191', 'imagefeatures192', 'imagefeatures193', 'imagefeatures194', 'imagefeatures195', 'imagefeatures196', 'imagefeatures197', 'imagefeatures198', 'imagefeatures199', 'imagefeatures200', 'imagefeatures201', 'imagefeatures202', 'imagefeatures203', 'imagefeatures204', 'imagefeatures205', 'imagefeatures206', 'imagefeatures207', 'imagefeatures208', 'imagefeatures209', 'imagefeatures210', 'imagefeatures211', 'imagefeatures212', 'imagefeatures213', 'imagefeatures214', 'imagefeatures215', 'imagefeatures216', 'imagefeatures217', 'imagefeatures218', 'imagefeatures219', 'imagefeatures220', 'imagefeatures221', 'imagefeatures222', 'imagefeatures223', 'imagefeatures224', 'imagefeatures225', 'imagefeatures226', 'imagefeatures227', 'imagefeatures228', 'imagefeatures229', 'imagefeatures230', 'imagefeatures231', 'imagefeatures232', 'imagefeatures233', 'imagefeatures234', 'imagefeatures235', 'imagefeatures236', 'imagefeatures237', 'imagefeatures238', 'imagefeatures239', 'imagefeatures240', 'imagefeatures241', 'imagefeatures242', 'imagefeatures243', 'imagefeatures244', 'imagefeatures245', 'imagefeatures246', 'imagefeatures247', 'imagefeatures248', 'imagefeatures249', 'imagefeatures250', 'imagefeatures251', 'imagefeatures252', 'imagefeatures253', 'imagefeatures254', 'imagefeatures255', 'imagefeatures256', 'imagefeatures257', 'imagefeatures258', 'imagefeatures259', 'imagefeatures260', 'imagefeatures261', 'imagefeatures262', 'imagefeatures263', 'imagefeatures264', 'imagefeatures265', 'imagefeatures266', 'imagefeatures267', 'imagefeatures268', 'imagefeatures269', 'imagefeatures270', 'imagefeatures271', 'imagefeatures272', 'imagefeatures273', 'imagefeatures274', 'imagefeatures275', 'imagefeatures276', 'imagefeatures277', 'imagefeatures278', 'imagefeatures279', 'imagefeatures280', 'imagefeatures281', 'imagefeatures282', 'imagefeatures283', 'imagefeatures284', 'imagefeatures285', 'imagefeatures286', 'imagefeatures287', 'imagefeatures288', 'imagefeatures289', 'imagefeatures290', 'imagefeatures291', 'imagefeatures292', 'imagefeatures293', 'imagefeatures294', 'imagefeatures295', 'imagefeatures296', 'imagefeatures297', 'imagefeatures298', 'imagefeatures299', 'imagefeatures300', 'imagefeatures301', 'imagefeatures302', 'imagefeatures303', 'imagefeatures304', 'imagefeatures305', 'imagefeatures306', 'imagefeatures307', 'imagefeatures308', 'imagefeatures309', 'imagefeatures310', 'imagefeatures311', 'imagefeatures312', 'imagefeatures313', 'imagefeatures314', 'imagefeatures315', 'imagefeatures316', 'imagefeatures317', 'imagefeatures318', 'imagefeatures319', 'imagefeatures320', 'imagefeatures321', 'imagefeatures322', 'imagefeatures323', 'imagefeatures324', 'imagefeatures325', 'imagefeatures326', 'imagefeatures327', 'imagefeatures328', 'imagefeatures329', 'imagefeatures330', 'imagefeatures331', 'imagefeatures332', 'imagefeatures333', 'imagefeatures334', 'imagefeatures335', 'imagefeatures336', 'imagefeatures337', 'imagefeatures338', 'imagefeatures339', 'imagefeatures340', 'imagefeatures341', 'imagefeatures342', 'imagefeatures343', 'imagefeatures344', 'imagefeatures345', 'imagefeatures346', 'imagefeatures347', 'imagefeatures348', 'imagefeatures349', 'imagefeatures350', 'imagefeatures351', 'imagefeatures352', 'imagefeatures353', 'imagefeatures354', 'imagefeatures355', 'imagefeatures356', 'imagefeatures357', 'imagefeatures358', 'imagefeatures359', 'imagefeatures360', 'imagefeatures361', 'imagefeatures362', 'imagefeatures363', 'imagefeatures364', 'imagefeatures365', 'imagefeatures366', 'imagefeatures367', 'imagefeatures368', 'imagefeatures369', 'imagefeatures370', 'imagefeatures371', 'imagefeatures372', 'imagefeatures373', 'imagefeatures374', 'imagefeatures375', 'imagefeatures376', 'imagefeatures377', 'imagefeatures378', 'imagefeatures379', 'imagefeatures380', 'imagefeatures381', 'imagefeatures382', 'imagefeatures383', 'imagefeatures384', 'imagefeatures385', 'imagefeatures386', 'imagefeatures387', 'imagefeatures388', 'imagefeatures389', 'imagefeatures390', 'imagefeatures391', 'imagefeatures392', 'imagefeatures393', 'imagefeatures394', 'imagefeatures395', 'imagefeatures396', 'imagefeatures397', 'imagefeatures398', 'imagefeatures399', 'imagefeatures400', 'imagefeatures401', 'imagefeatures402', 'imagefeatures403', 'imagefeatures404', 'imagefeatures405', 'imagefeatures406', 'imagefeatures407', 'imagefeatures408', 'imagefeatures409', 'imagefeatures410', 'imagefeatures411', 'imagefeatures412', 'imagefeatures413', 'imagefeatures414', 'imagefeatures415', 'imagefeatures416', 'imagefeatures417', 'imagefeatures418', 'imagefeatures419', 'imagefeatures420', 'imagefeatures421', 'imagefeatures422', 'imagefeatures423', 'imagefeatures424', 'imagefeatures425', 'imagefeatures426', 'imagefeatures427', 'imagefeatures428', 'imagefeatures429', 'imagefeatures430', 'imagefeatures431', 'imagefeatures432', 'imagefeatures433', 'imagefeatures434', 'imagefeatures435', 'imagefeatures436', 'imagefeatures437', 'imagefeatures438', 'imagefeatures439', 'imagefeatures440', 'imagefeatures441', 'imagefeatures442', 'imagefeatures443', 'imagefeatures444', 'imagefeatures445', 'imagefeatures446', 'imagefeatures447', 'imagefeatures448', 'imagefeatures449', 'imagefeatures450', 'imagefeatures451', 'imagefeatures452', 'imagefeatures453', 'imagefeatures454', 'imagefeatures455', 'imagefeatures456', 'imagefeatures457', 'imagefeatures458', 'imagefeatures459', 'imagefeatures460', 'imagefeatures461', 'imagefeatures462', 'imagefeatures463', 'imagefeatures464', 'imagefeatures465', 'imagefeatures466', 'imagefeatures467', 'imagefeatures468', 'imagefeatures469', 'imagefeatures470', 'imagefeatures471', 'imagefeatures472', 'imagefeatures473', 'imagefeatures474', 'imagefeatures475', 'imagefeatures476', 'imagefeatures477', 'imagefeatures478', 'imagefeatures479', 'imagefeatures480', 'imagefeatures481', 'imagefeatures482', 'imagefeatures483', 'imagefeatures484', 'imagefeatures485', 'imagefeatures486', 'imagefeatures487', 'imagefeatures488', 'imagefeatures489', 'imagefeatures490', 'imagefeatures491', 'imagefeatures492', 'imagefeatures493', 'imagefeatures494', 'imagefeatures495', 'imagefeatures496', 'imagefeatures497', 'imagefeatures498', 'imagefeatures499', 'imagefeatures500', 'imagefeatures501', 'imagefeatures502', 'imagefeatures503', 'imagefeatures504', 'imagefeatures505', 'imagefeatures506', 'imagefeatures507', 'imagefeatures508', 'imagefeatures509', 'imagefeatures510', 'imagefeatures511', 'imagefeatures512', 'imagefeatures513', 'imagefeatures514', 'imagefeatures515', 'imagefeatures516', 'imagefeatures517', 'imagefeatures518', 'imagefeatures519', 'imagefeatures520', 'imagefeatures521', 'imagefeatures522', 'imagefeatures523', 'imagefeatures524', 'imagefeatures525', 'imagefeatures526', 'imagefeatures527', 'imagefeatures528', 'imagefeatures529', 'imagefeatures530', 'imagefeatures531', 'imagefeatures532', 'imagefeatures533', 'imagefeatures534', 'imagefeatures535', 'imagefeatures536', 'imagefeatures537', 'imagefeatures538', 'imagefeatures539', 'imagefeatures540', 'imagefeatures541', 'imagefeatures542', 'imagefeatures543', 'imagefeatures544', 'imagefeatures545', 'imagefeatures546', 'imagefeatures547', 'imagefeatures548', 'imagefeatures549', 'imagefeatures550', 'imagefeatures551', 'imagefeatures552', 'imagefeatures553', 'imagefeatures554', 'imagefeatures555', 'imagefeatures556', 'imagefeatures557', 'imagefeatures558', 'imagefeatures559', 'imagefeatures560', 'imagefeatures561', 'imagefeatures562', 'imagefeatures563', 'imagefeatures564', 'imagefeatures565', 'imagefeatures566', 'imagefeatures567', 'imagefeatures568', 'imagefeatures569', 'imagefeatures570', 'imagefeatures571', 'imagefeatures572', 'imagefeatures573', 'imagefeatures574', 'imagefeatures575', 'imagefeatures576', 'imagefeatures577', 'imagefeatures578', 'imagefeatures579', 'imagefeatures580', 'imagefeatures581', 'imagefeatures582', 'imagefeatures583', 'imagefeatures584', 'imagefeatures585', 'imagefeatures586', 'imagefeatures587', 'imagefeatures588', 'imagefeatures589', 'imagefeatures590', 'imagefeatures591', 'imagefeatures592', 'imagefeatures593', 'imagefeatures594', 'imagefeatures595', 'imagefeatures596', 'imagefeatures597', 'imagefeatures598', 'imagefeatures599', 'imagefeatures600', 'imagefeatures601', 'imagefeatures602', 'imagefeatures603', 'imagefeatures604', 'imagefeatures605', 'imagefeatures606', 'imagefeatures607', 'imagefeatures608', 'imagefeatures609', 'imagefeatures610', 'imagefeatures611', 'imagefeatures612', 'imagefeatures613', 'imagefeatures614', 'imagefeatures615', 'imagefeatures616', 'imagefeatures617', 'imagefeatures618', 'imagefeatures619', 'imagefeatures620', 'imagefeatures621', 'imagefeatures622', 'imagefeatures623', 'imagefeatures624', 'imagefeatures625', 'imagefeatures626', 'imagefeatures627', 'imagefeatures628', 'imagefeatures629', 'imagefeatures630', 'imagefeatures631', 'imagefeatures632', 'imagefeatures633', 'imagefeatures634', 'imagefeatures635', 'imagefeatures636', 'imagefeatures637', 'imagefeatures638', 'imagefeatures639', 'imagefeatures640', 'imagefeatures641', 'imagefeatures642', 'imagefeatures643', 'imagefeatures644', 'imagefeatures645', 'imagefeatures646', 'imagefeatures647', 'imagefeatures648', 'imagefeatures649', 'imagefeatures650', 'imagefeatures651', 'imagefeatures652', 'imagefeatures653', 'imagefeatures654', 'imagefeatures655', 'imagefeatures656', 'imagefeatures657', 'imagefeatures658', 'imagefeatures659', 'imagefeatures660', 'imagefeatures661', 'imagefeatures662', 'imagefeatures663', 'imagefeatures664', 'imagefeatures665', 'imagefeatures666', 'imagefeatures667', 'imagefeatures668', 'imagefeatures669', 'imagefeatures670', 'imagefeatures671', 'imagefeatures672', 'imagefeatures673', 'imagefeatures674', 'imagefeatures675', 'imagefeatures676', 'imagefeatures677', 'imagefeatures678', 'imagefeatures679', 'imagefeatures680', 'imagefeatures681', 'imagefeatures682', 'imagefeatures683', 'imagefeatures684', 'imagefeatures685', 'imagefeatures686', 'imagefeatures687', 'imagefeatures688', 'imagefeatures689', 'imagefeatures690', 'imagefeatures691', 'imagefeatures692', 'imagefeatures693', 'imagefeatures694', 'imagefeatures695', 'imagefeatures696', 'imagefeatures697', 'imagefeatures698', 'imagefeatures699', 'imagefeatures700', 'imagefeatures701', 'imagefeatures702', 'imagefeatures703', 'imagefeatures704', 'imagefeatures705', 'imagefeatures706', 'imagefeatures707', 'imagefeatures708', 'imagefeatures709', 'imagefeatures710', 'imagefeatures711', 'imagefeatures712', 'imagefeatures713', 'imagefeatures714', 'imagefeatures715', 'imagefeatures716', 'imagefeatures717', 'imagefeatures718', 'imagefeatures719', 'imagefeatures720', 'imagefeatures721', 'imagefeatures722', 'imagefeatures723', 'imagefeatures724', 'imagefeatures725', 'imagefeatures726', 'imagefeatures727', 'imagefeatures728', 'imagefeatures729', 'imagefeatures730', 'imagefeatures731', 'imagefeatures732', 'imagefeatures733', 'imagefeatures734', 'imagefeatures735', 'imagefeatures736', 'imagefeatures737', 'imagefeatures738', 'imagefeatures739', 'imagefeatures740', 'imagefeatures741', 'imagefeatures742', 'imagefeatures743', 'imagefeatures744', 'imagefeatures745', 'imagefeatures746', 'imagefeatures747', 'imagefeatures748', 'imagefeatures749', 'imagefeatures750', 'imagefeatures751', 'imagefeatures752', 'imagefeatures753', 'imagefeatures754', 'imagefeatures755', 'imagefeatures756', 'imagefeatures757', 'imagefeatures758', 'imagefeatures759', 'imagefeatures760', 'imagefeatures761', 'imagefeatures762', 'imagefeatures763', 'imagefeatures764', 'imagefeatures765', 'imagefeatures766', 'imagefeatures767', 'imagefeatures768', 'imagefeatures769', 'imagefeatures770', 'imagefeatures771', 'imagefeatures772', 'imagefeatures773', 'imagefeatures774', 'imagefeatures775', 'imagefeatures776', 'imagefeatures777', 'imagefeatures778', 'imagefeatures779', 'imagefeatures780', 'imagefeatures781', 'imagefeatures782', 'imagefeatures783', 'imagefeatures784', 'imagefeatures785', 'imagefeatures786', 'imagefeatures787', 'imagefeatures788', 'imagefeatures789', 'imagefeatures790', 'imagefeatures791', 'imagefeatures792', 'imagefeatures793', 'imagefeatures794', 'imagefeatures795', 'imagefeatures796', 'imagefeatures797', 'imagefeatures798', 'imagefeatures799', 'imagefeatures800', 'imagefeatures801', 'imagefeatures802', 'imagefeatures803', 'imagefeatures804', 'imagefeatures805', 'imagefeatures806', 'imagefeatures807', 'imagefeatures808', 'imagefeatures809', 'imagefeatures810', 'imagefeatures811', 'imagefeatures812', 'imagefeatures813', 'imagefeatures814', 'imagefeatures815', 'imagefeatures816', 'imagefeatures817', 'imagefeatures818', 'imagefeatures819', 'imagefeatures820', 'imagefeatures821', 'imagefeatures822', 'imagefeatures823', 'imagefeatures824', 'imagefeatures825', 'imagefeatures826', 'imagefeatures827', 'imagefeatures828', 'imagefeatures829', 'imagefeatures830', 'imagefeatures831', 'imagefeatures832', 'imagefeatures833', 'imagefeatures834', 'imagefeatures835', 'imagefeatures836', 'imagefeatures837', 'imagefeatures838', 'imagefeatures839', 'imagefeatures840', 'imagefeatures841', 'imagefeatures842', 'imagefeatures843', 'imagefeatures844', 'imagefeatures845', 'imagefeatures846', 'imagefeatures847', 'imagefeatures848', 'imagefeatures849', 'imagefeatures850', 'imagefeatures851', 'imagefeatures852', 'imagefeatures853', 'imagefeatures854', 'imagefeatures855', 'imagefeatures856', 'imagefeatures857', 'imagefeatures858', 'imagefeatures859', 'imagefeatures860', 'imagefeatures861', 'imagefeatures862', 'imagefeatures863', 'imagefeatures864', 'imagefeatures865', 'imagefeatures866', 'imagefeatures867', 'imagefeatures868', 'imagefeatures869', 'imagefeatures870', 'imagefeatures871', 'imagefeatures872', 'imagefeatures873', 'imagefeatures874', 'imagefeatures875', 'imagefeatures876', 'imagefeatures877', 'imagefeatures878', 'imagefeatures879', 'imagefeatures880', 'imagefeatures881', 'imagefeatures882', 'imagefeatures883', 'imagefeatures884', 'imagefeatures885', 'imagefeatures886', 'imagefeatures887', 'imagefeatures888', 'imagefeatures889', 'imagefeatures890', 'imagefeatures891', 'imagefeatures892', 'imagefeatures893', 'imagefeatures894', 'imagefeatures895', 'imagefeatures896', 'imagefeatures897', 'imagefeatures898', 'imagefeatures899', 'imagefeatures900', 'imagefeatures901', 'imagefeatures902', 'imagefeatures903', 'imagefeatures904', 'imagefeatures905', 'imagefeatures906', 'imagefeatures907', 'imagefeatures908', 'imagefeatures909', 'imagefeatures910', 'imagefeatures911', 'imagefeatures912', 'imagefeatures913', 'imagefeatures914', 'imagefeatures915', 'imagefeatures916', 'imagefeatures917', 'imagefeatures918', 'imagefeatures919', 'imagefeatures920', 'imagefeatures921', 'imagefeatures922', 'imagefeatures923', 'imagefeatures924', 'imagefeatures925', 'imagefeatures926', 'imagefeatures927', 'imagefeatures928', 'imagefeatures929', 'imagefeatures930', 'imagefeatures931', 'imagefeatures932', 'imagefeatures933', 'imagefeatures934', 'imagefeatures935', 'imagefeatures936', 'imagefeatures937', 'imagefeatures938', 'imagefeatures939', 'imagefeatures940', 'imagefeatures941', 'imagefeatures942', 'imagefeatures943', 'imagefeatures944', 'imagefeatures945', 'imagefeatures946', 'imagefeatures947', 'imagefeatures948', 'imagefeatures949', 'imagefeatures950', 'imagefeatures951', 'imagefeatures952', 'imagefeatures953', 'imagefeatures954', 'imagefeatures955', 'imagefeatures956', 'imagefeatures957', 'imagefeatures958', 'imagefeatures959', 'imagefeatures960', 'imagefeatures961', 'imagefeatures962', 'imagefeatures963', 'imagefeatures964', 'imagefeatures965', 'imagefeatures966', 'imagefeatures967', 'imagefeatures968', 'imagefeatures969', 'imagefeatures970', 'imagefeatures971', 'imagefeatures972', 'imagefeatures973', 'imagefeatures974', 'imagefeatures975', 'imagefeatures976', 'imagefeatures977', 'imagefeatures978', 'imagefeatures979', 'imagefeatures980', 'imagefeatures981', 'imagefeatures982', 'imagefeatures983', 'imagefeatures984', 'imagefeatures985', 'imagefeatures986', 'imagefeatures987', 'imagefeatures988', 'imagefeatures989', 'imagefeatures990', 'imagefeatures991', 'imagefeatures992', 'imagefeatures993', 'imagefeatures994', 'imagefeatures995', 'imagefeatures996', 'imagefeatures997', 'imagefeatures998', 'imagefeatures999', 'imagefeatures1000'};
predictors = inputTable(:, predictorNames);
response = inputTable.Labels;
isCategoricalPredictor = [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false];

% Set up holdout validation
cvp = cvpartition(response, 'Holdout', 0.25);
trainingPredictors = predictors(cvp.training, :);
trainingResponse = response(cvp.training, :);
trainingIsCategoricalPredictor = isCategoricalPredictor;

% Train a classifier
% This code specifies all the classifier options and trains the classifier.
subspaceDimension = max(1, min(500, width(trainingPredictors) - 1));
classificationEnsemble = fitcensemble(...
    trainingPredictors, ...
    trainingResponse, ...
    'Method', 'Subspace', ...
    'NumLearningCycles', 30, ...
    'Learners', 'knn', ...
    'NPredToSample', subspaceDimension, ...
    'ClassNames', categorical({'Fall'; 'Not Fallen'}));

% Create the result struct with predict function
ensemblePredictFcn = @(x) predict(classificationEnsemble, x);
validationPredictFcn = @(x) ensemblePredictFcn(x);

% Add additional fields to the result struct


% Compute validation predictions
validationPredictors = predictors(cvp.test, :);
validationResponse = response(cvp.test, :);
[validationPredictions, validationScores] = validationPredictFcn(validationPredictors);

% Compute validation accuracy
correctPredictions = (validationPredictions == validationResponse);
isMissing = ismissing(validationResponse);
correctPredictions = correctPredictions(~isMissing);
validationAccuracy = sum(correctPredictions)/length(correctPredictions);
end 